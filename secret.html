<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Are you awake — Matrix Style</title>
  <style>
    /* Reset */
    * { box-sizing: border-box; margin: 0; padding: 0; }
    html,body { height: 100%; }

    /* Background canvas full-screen */
    canvas#matrix {
      position: fixed;
      inset: 0;
      width: 100%;
      height: 100%;
      background: #000; /* pure black like the film */
      z-index: 0;
      display: block;
    }

    /* Centered container for the headline */
    .center {
      position: relative;
      z-index: 2; /* above canvas */
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      pointer-events: none; /* clicks fall through to canvas if any */
    }

    /* Matrix-style main text */
    h1 {
      font-family: 'Lucida Console', 'Courier New', monospace;
      color: #7fff7f;
      font-size: calc(24px + 6vw);
      letter-spacing: .06em;
      text-transform: lowercase;
      text-align: center;
      line-height: 1;
      pointer-events: none;

      /* neon / glow */
      text-shadow:
        0 0 2px rgba(127,255,127,0.6),
        0 0 8px rgba(127,255,127,0.25),
        0 0 20px rgba(0,255,0,0.12);

      /* subtle scanline overlay using background-clip */
      background-image: linear-gradient(transparent 70%, rgba(0,0,0,0.06) 70%);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }

    /* Give the green color fill behind clipped text using pseudo-element */
    h1::before{
      content: attr(data-text);
      position: absolute;
      inset: 0;
      color: #7fff7f;
      z-index: 1;
      -webkit-text-stroke: 0.5px rgba(0,100,0,0.4);
      mix-blend-mode: screen;
      filter: drop-shadow(0 0 6px rgba(127,255,127,0.18));
      pointer-events: none;
    }

    /* Flicker effect */
    @keyframes flicker {
      0%   { opacity: 1; transform: translateY(0) scale(1); }
      3%   { opacity: 0.8; transform: translateY(-1px) scale(1.01); }
      6%   { opacity: 1; transform: translateY(0) scale(1); }
      10%  { opacity: 0.9; }
      100% { opacity: 1; }
    }

    h1 { animation: flicker 2.8s infinite linear; }

    /* small subtitle in matrix font look */
    p.subtitle {
      margin-top: 0.6rem;
      font-family: 'Courier New', monospace;
      color: rgba(127,255,127,0.85);
      font-size: clamp(12px, 1.2vw, 18px);
      text-align: center;
      mix-blend-mode: screen;
      pointer-events: none;
    }

    /* make sure the page stays black on mobile chrome when pulling */
    meta[name='theme-color']{ color: #000 }
  </style>
</head>
<body>
  <canvas id="matrix"></canvas>

  <div class="center" aria-hidden="false">
    <div>
      <h1 data-text="are you awake">are you awake</h1>
      <p class="subtitle">wake up — the code is flowing</p>
    </div>
  </div>

  <script>
    /* Matrix rain on canvas */
    (() => {
      const canvas = document.getElementById('matrix');
      const ctx = canvas.getContext('2d');

      // Resize canvas to device size (handles DPR)
      function resize() {
        const dpr = window.devicePixelRatio || 1;
        canvas.width = Math.floor(window.innerWidth * dpr);
        canvas.height = Math.floor(window.innerHeight * dpr);
        canvas.style.width = window.innerWidth + 'px';
        canvas.style.height = window.innerHeight + 'px';
        ctx.scale(dpr, dpr);
      }
      resize();
      window.addEventListener('resize', () => {
        // small debounce
        clearTimeout(window._matrixResize);
        window._matrixResize = setTimeout(() => {
          // reset transform before resizing
          ctx.setTransform(1,0,0,1,0,0);
          resize();
        }, 60);
      });

      const columns = Math.floor(window.innerWidth / 14);
      const drops = new Array(columns).fill(0).map(() => Math.random() * -50);

      const chars = 'アァカサタナハマヤャラワガザダバパイィキシチニヒミリヰギジヂビピウゥクスツヌフムユュルグズヅブプエェケセテネヘメレヱゲゼデベペオォコソトノホモヨョロヲゴゾドボポ0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ';

      function draw() {
        // translucent black background for fade effect
        ctx.fillStyle = 'rgba(0, 0, 0, 0.06)';
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        ctx.font = '14px monospace';

        for (let i = 0; i < drops.length; i++) {
          const x = i * 14;
          const y = drops[i] * 14; // row height

          // bright lead character
          const ch = chars.charAt(Math.floor(Math.random() * chars.length));
          ctx.fillStyle = 'rgba(180,255,180,1)';
          ctx.fillText(ch, x + 4, y + 14);

          // trailing faint green for depth (draw a few trailing chars)
          for (let t = 1; t < 4; t++) {
            const trailing = chars.charAt(Math.floor(Math.random() * chars.length));
            ctx.fillStyle = `rgba(40,160,40,${0.15 / t})`;
            ctx.fillText(trailing, x + 4, y + 14 - t * 14);
          }

          if (y > window.innerHeight + Math.random() * 1000) {
            drops[i] = Math.random() * -10;
          }

          drops[i] += 0.9 + Math.random() * 0.6; // speed per column
        }

        requestAnimationFrame(draw);
      }

      // initial clear (solid black)
      ctx.fillStyle = '#000';
      ctx.fillRect(0, 0, canvas.width, canvas.height);

      // subtle vignette using compositing (drawn over the canvas contents occasionally)
      function drawVignette() {
        // draw only once in a while to avoid performance hit
        ctx.save();
        ctx.globalCompositeOperation = 'source-over';
        const w = canvas.width / (window.devicePixelRatio || 1);
        const h = canvas.height / (window.devicePixelRatio || 1);
        const grad = ctx.createRadialGradient(w/2, h/2, Math.min(w,h)/4, w/2, h/2, Math.max(w,h)/1.2);
        grad.addColorStop(0, 'rgba(0,0,0,0)');
        grad.addColorStop(1, 'rgba(0,0,0,0.45)');
        ctx.fillStyle = grad;
        ctx.fillRect(0, 0, w, h);
        ctx.restore();
      }

      // start
      draw();
      setTimeout(drawVignette, 600);

      // Small user-friendly enhancement: allow toggling the subtitle with spacebar
      window.addEventListener('keydown', (e) => {
        if (e.code === 'Space') {
          const sub = document.querySelector('.subtitle');
          if (!sub) return;
          sub.style.display = (sub.style.display === 'none') ? 'block' : 'none';
          e.preventDefault();
        }
      });

    })();
  </script>
</body>
</html>
